/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Dan Shue. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/**
 * Editor Selection Preservation
 * 
 * Preserves visual highlighting of text selections in the Obsidian editor
 * even when focus moves to other elements (e.g., chat input).
 * 
 * This improves UX by:
 * - Showing users what text will be included as context
 * - Making implicit context augmentation more transparent
 * - Maintaining visual feedback across focus changes
 */

/* 
 * Preserve selection highlighting in unfocused/inactive editor elements
 * Uses ::selection pseudo-element to style text selection appearance
 * Works across all editor elements in the workspace
 */
.workspace-leaf-content ::selection {
	/* Use a slightly muted version of the selection color for inactive selections */
	background: var(--text-selection);
	color: inherit;
}

/* 
 * CodeMirror-specific selection preservation
 * Obsidian uses CodeMirror for the editor
 */
.cm-editor .cm-content ::selection,
.cm-editor .cm-line ::selection {
	background: var(--text-selection);
}

/*
 * Ensure selection background remains visible in all editor states
 * Default state (focused and unfocused)
 */
.cm-editor .cm-selectionBackground {
	background: var(--text-selection);
}

/*
 * Reduce opacity when editor loses focus
 * This indicates inactive state while maintaining visibility
 */
.cm-editor:not(.cm-focused) .cm-selectionBackground {
	opacity: 0.7; /* Slightly more transparent to indicate inactive state */
}

/*
 * Mobile-specific adjustments
 * Ensure selection remains visible on mobile devices
 */
.is-mobile .cm-editor:not(.cm-focused) .cm-selectionBackground {
	opacity: 0.6; /* More transparent on mobile for clearer visual distinction */
}

/*
 * Preserve selection in Legacy editor (for older Obsidian versions)
 * Uses contenteditable-based editor
 */
.markdown-source-view.is-readable-line-width ::selection,
.markdown-source-view ::selection {
	background: var(--text-selection);
}
